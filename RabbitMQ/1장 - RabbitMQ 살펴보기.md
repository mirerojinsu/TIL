## RabbitMQ 살펴보기
### RabbitMQ의 기능과 장점
- 오픈소스
- 플랫폼과 업체 중립성
- 경량성
    - 관리자 UI 플러그인과 함께 코어 애플리케이션을 구동하는 데 40MB 미만의 메모리만 사용
    - 이후 큐에 전송되는 메시지양이 증가함에 따라 메모리 사용량이 점차 증가
- 다양한 클라이언트 라이브러리 
- 유연한 성능과 안정성 절충 제어
    - ex) 메시지를 전달하기 전 디스크에 저장할 수 있음
    - 클러스터를 설정할 때 큐를 HA로 설정 가능
- 대기 시간이 긴 네트워크 환경을 위한 플로그인 
- 서드파티 플러그인
    - RabbitMQ를 직접 사용해 메시지를 DB에 저장 가능
- 보안 계층
    - SSL

### RabbitMQ와 얼랭
RabbitMQ는 언랭으로 구현되었다.

언랭은 분산 처리, 장애 허용, 연성 시스템과 같이 99.999의 가동 시간을 요구하는 애플리케이션을 위해 설계됐다. 또한 공유하는 상태가 없도록 설계돼 있으므로 높은 수준의 동시성을 제공한다. 

### RabbitMQ와 AMQP
RabbitMQ는 AMQP 스펙을 구현한 최초의 메시지 브로커 중 하나였다. AMQP 자체가 RabbitMQ 에 영향을 많이 줬다. 

AMQP에 대한 자세한 내용은 https://www.amqp.org/ 에서 확인할 수 있다. 

이외에도 MQTT, STOMP, XMPP 등 다양한 프로토콜도 제공한다. 

다른 메시지 브로커와 비교하며 평가할 때 AMQP 스펙을 구현한 내용은 중요한 차이점이다. 유연한 메시지 라우팅, 메시지 내구성 설정, 데이터센터 간 통신 등 메시지 지향 아키텍처의 복잡한 요구 사항에 대한 벤더 중립적이며 플랫폼 독립적인 솔루션이다. 

### RabbitMQ를 사용하는 곳들

### 1.3 느슨하게 결합된 아키텍처의 장점
마지막 로그인 시간을 저장하는 서비스에서 메시지 지향 미들웨어(MOM)을 사용 -> 로그인 처리에서 DB업데이트 작업을 분리하여 사용자는 빠른 로그인 가능

### 1.3.1 애플리케이션의 의존성 제거
애플리케이션 아키텍처는 더 이상 데이터베이스 쓰기 성능에 영향을 받지 않으며, 핵심 애플리케이션의 코드를 수정하지 않고도 데이터를 처리하는 새로운 애플리케이션을 쉽게 추가할 수 있다.

### 1.3.4 데이터와 이벤트 복제
데이터센터 간에 배포된 애플리케이션의 데이터 동기화와 데이터의 전달을 위해 Federation 플러그인을 제공.

RabbitMQ에서 Federation이란, 두 RabbitMQ 클러스터를 하나의 개념으로 묶는 것을 의미한다. Federation으로 묶이게 되면, 상위(Upstream) 클러스터의 정보들을 하위(Downstream) 클러스터로 전달 또는 복사할 수 있게 된다.

[Federation 참고 BLOG](https://velog.io/@juhyeon1114/RabbitMQ-Federation-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0) 

### 1.3.6 AMQ 모델
AMQ 모델은 메시지 라우팅 동작을 정의하는 메시지 브로커의 세 가지 추상 컴포넌트를 다음과 같이 논리적으로 정의한다. 

- 익스체인지: 메시지 브로커에서 큐에 메시지를 전달하는 컴포넌트 
- 큐: 메시지를 저장하는 디스크상이나 메모리상의 자료 구조 
- 바인딩: 익스체인지에 전달된 메시지가 어떤 큐에 저장돼야 하는지 정의하느 컴포넌트 

#### 익스체인지
여러 유형의 익스체인지가 있고, 플러그인을 사용해서 직접 커스텀 익스체인지도 정의 가능

#### 바인딩
애플리케이션 -> (라우팅 키) -> 익스체인지 -> (바인딩 키) -> 큐

즉, 바인딩 키는 큐를 익스체인지에 연결하고 라우팅 키를 평가하는 기준